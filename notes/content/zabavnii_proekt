Забавный проект

<h1>Личный архив страниц из интернета?</h1>

<p>Я человек любопытный и нередко нахожу страничку интернете, которые не очень попялурны, но при этом в будущем я хотел бы посерьезнее изучить. Вы можете подумать, ну сделай закладку и делов. Но проблема в том что люди просто переносят, удаляют, меняют эти странички. И остается это чувство... я сошел с ума и мне приснилась та статья? Может её не было никогда?</p>

<p>Идея в том что нужно просто скопировать всякие картинки, стили, javascript по соотстветствующему адресу и как-то их аккуратно сохранить чтобы открывать локально. Ну и потому еще как их сделать доступными легко с любого компьютера. Ну к сути, я нашел прекрасный проект под названием <a href="https://archivebox.io/">ArchiveBox</a>, который создавался почти один в один под мои запросы.</p>

<p>Я долго маялся, зная что мне надо будет разобраться как лучше использовать этот проект у себя на сервере. Установка различных приложений с базой данных и прочим может быть откровенной головной болью. Пользователи, пакеты, настройки, недокументированные временные файлы... много мест накосячить. Потому я с самого начала намеревался использовать контейнеризацию, что для обычного программиста звучит как <a href="https://www.docker.com/">Docker</a>.</p>

<h1>Не все VPS поддержавают контейнеры...</h1>

<p>Это стало для меня новостью после нескольких безуспешных часов с обновления Ubuntu, и попытками запустить базовый образ для проверки работоспособности Docker. Так как я использую фактически виртуальный сервер (<b>V</b>irtual <b>P</b>rivate <b>S</b>erver), то они создаются на базе специального программного обеспечения со своими стандартами, как OpenVZ, KVM.</p>

<p>Общение с тех.поддержкой подтвердило мои подозрения и мне пришлось обновить сервер буквально отказавшись от всех старых данных, настроек и прочего. Но после заказа нового хостинга я смог получить работающую контейнеризацию. И теперь я могу вызывать со своего сервера образ проекта по арзивации веб-страниц и не заваливать все непонятным зависимостями и файликами.</p>

<h1>Не так быстро</h1>

<p>Так для результатов работы <b>ArchiveBox</b> я решил использовать папку которую в контейнер я монтировал на этапе запуска архивации. И оказалось что моя папка не соответствует правам доступа пользователя от которого запускается основной процесс образа. Есть грубый вариант дать доступе к папке для ВСЕХ (как я сделал первоначально), а по факту надо было дать доступ на запись группе docker на сервере.</p>

<p>Так же имейте ввиду что архив создается, на века! Там есть и pdf-версия, и какие-то специальные архивные форматы, так что сложные странички легко могут потребовать гигабайт места на жестком диске. Но сейчас 21 век и это стоит копейки в сравнении с началом 3 тысячетелия.</p>

<p>Так же мне потребовалось сделать маленькую модификацию работы веб-сервера, чтобы он сам создавал index-content при просмотре папок с архивным данными.</p>

<h1>Немного о грустном</h1>

<p>Если вы скачали страницу с ошибкой, хотите что-то удалить, исправить. То я реально без понятия как это сделать без полной установки проекта на ваш сервер. Когда мне потребовалось удалить неудачные данные, то я просто снес интересующие меня папки и руками отредактировал основную страницу со списком архивированных данных. Кривота конечно, но я просто буду осмотрительнее выбирать адреса в следующий раз.</p>